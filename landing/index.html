<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generador de Landing (HTML + Netlify)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0b0b; --fg:#eaeaea; --muted:#a1a1a1; --brand:#00c389; --card:#121212; --line:#1f1f1f;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;background:var(--bg);color:var(--fg);}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:20px}
    .title{font-weight:700;letter-spacing:-0.02em}
    .badge{font-size:12px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:380px 1fr;gap:20px}
    @media (max-width:1000px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden}
    .card h3{margin:0;padding:16px 16px 8px;border-bottom:1px solid var(--line);font-size:16px;color:#cfcfcf}
    .card .body{padding:16px}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type="text"], input[type="url"], textarea, select{width:100%;background:#0f0f0f;border:1px solid var(--line);color:var(--fg);padding:10px 12px;border-radius:10px;outline:none}
    textarea{min-height:100px;resize:vertical}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{background:var(--brand);color:#001b12;border:none;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
    button.secondary{background:transparent;border:1px solid var(--line);color:var(--fg)}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    /* Preview */
    .preview-wrap{padding:0}
    iframe{width:100%;height:74vh;border:0;border-top:1px solid var(--line)}
    .toolbar{display:flex;gap:10px;align-items:center;padding:12px;border-bottom:1px solid var(--line)}
    .chip{font-size:12px;color:var(--muted)}
    .spacer{flex:1}
    .ghost{opacity:.6}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title">Generador de Landing en HTML</div>
        <div class="chip">Sube imagen o video, escribe tu copy y descarga un ZIP listo para Netlify.</div>
      </div>
      <div class="badge">v1 – client‑side, sin backend</div>
    </header>

    <div class="grid">
      <!-- FORM -->
      <section class="card">
        <h3>Contenido</h3>
        <div class="body">
          <label>Título</label>
          <input id="title" type="text" placeholder="Ej. Sesiones gastronómicas que venden" value="Sesiones gastronómicas que venden" />

          <div class="row" style="margin-top:12px">
            <div>
              <label>Subtítulo</label>
              <input id="subtitle" type="text" placeholder="Texto breve de soporte" value="Fotografía de comida con intención de venta" />
            </div>
            <div>
              <label>CTA (texto)</label>
              <input id="ctaText" type="text" placeholder="Reserva tu sesión" value="Agenda tu sesión" />
            </div>
          </div>

          <div class="row" style="margin-top:12px">
            <div>
              <label>CTA (enlace)</label>
              <input id="ctaHref" type="url" placeholder="https://cal.com/tuusuario/agenda" value="https://cal.com/marketographer/agenda" />
            </div>
            <div>
              <label>Color de marca (hex)</label>
              <input id="brand" type="text" placeholder="#00c389" value="#00c389" />
            </div>
          </div>

          <label style="margin-top:12px">Descripción</label>
          <textarea id="body" placeholder="Beneficios, bullets, garantías...">Fotos que abren apetito y caja registradora. Paquetes ágiles, entrega rápida y dirección de arte para que tu menú no se vea barato.</textarea>

          <div class="row" style="margin-top:12px">
            <div>
              <label>Tipo de media</label>
              <select id="mediaType">
                <option value="image" selected>Imagen</option>
                <option value="video">Video</option>
              </select>
            </div>
            <div>
              <label>Archivo (jpg/png/mp4)</label>
              <input id="file" type="file" accept="image/*,video/mp4" />
            </div>
          </div>

          <div class="row" style="margin-top:12px">
            <div>
              <label>Favicon (png 32x32) <span class="ghost">opcional</span></label>
              <input id="favicon" type="file" accept="image/png" />
            </div>
            <div>
              <label>Fuente Google <span class="ghost">opcional</span></label>
              <input id="googleFont" type="text" placeholder="Poppins:300,400,600,700" />
            </div>
          </div>

          <div class="actions">
            <button id="btnPreview">Previsualizar</button>
            <button id="btnDownload">Descargar ZIP</button>
            <button id="btnReset" class="secondary">Reset</button>
          </div>
          <div class="hint">Privado: todo se procesa en tu navegador. El ZIP incluye <code>index.html</code> y carpeta <code>assets/</code>.</div>
        </div>
      </section>

      <!-- PREVIEW -->
      <section class="card preview-wrap">
        <div class="toolbar">
          <div class="chip">Preview</div>
          <div class="spacer"></div>
          <div class="chip ghost">Responsive: usa DevTools si quieres simular móvil</div>
        </div>
        <iframe id="preview"></iframe>
      </section>
    </div>
  </div>

  <!-- JSZip + FileSaver from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

  <script>
    const $ = sel => document.querySelector(sel);
    const state = { mediaFile:null, faviconFile:null };

    $('#file').addEventListener('change', e => { state.mediaFile = e.target.files?.[0] || null; });
    $('#favicon').addEventListener('change', e => { state.faviconFile = e.target.files?.[0] || null; });
    $('#btnReset').addEventListener('click', () => { document.querySelectorAll('input, textarea').forEach(i=>{ if(i.type!=='file') i.value=''; }); $('#preview').srcdoc=''; state.mediaFile=null; state.faviconFile=null; });

    function escapeHTML(s=''){ return s.replace(/[&<>\"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }

    function landingTemplate(opts){
      const fontTag = opts.googleFont ? `<link href="https://fonts.googleapis.com/css2?family=${opts.googleFont.replace(/ /g,'+')}&display=swap" rel="stylesheet">` : '';
      const mediaEl = opts.mediaType === 'video' ?
        `<video class="hero-media" src="assets/${opts.mediaName}" autoplay muted playsinline loop></video>` :
        `<img class="hero-media" src="assets/${opts.mediaName}" alt="media" />`;

      return `<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>${escapeHTML(opts.title)}</title>
  ${fontTag}
  ${opts.faviconName ? `<link rel="icon" type="image/png" href="assets/${opts.faviconName}">` : ''}
  <style>
    :root{ --brand:${opts.brand}; --bg:#0b0b0b; --fg:#eaeaea; --muted:#a1a1a1; --line:#1f1f1f; }
    *{box-sizing:border-box}
    body{margin:0;font-family:${opts.cssFont};background:var(--bg);color:var(--fg);}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;min-height:75vh}
    @media(max-width:960px){.hero{grid-template-columns:1fr;min-height:unset}}
    .kicker{color:var(--muted);font-size:12px;letter-spacing:.12em;text-transform:uppercase}
    h1{margin:.2rem 0 0;letter-spacing:-.02em;font-size:clamp(28px,4.4vw,52px)}
    p{line-height:1.6;color:#cfcfcf}
    .cta{display:inline-flex;align-items:center;gap:10px;background:var(--brand);color:#001b12;border:none;padding:12px 16px;border-radius:12px;font-weight:700;text-decoration:none}
    .cta:hover{filter:brightness(.95)}
    .hero-media{width:100%;height:100%;object-fit:cover;border-radius:16px;border:1px solid var(--line);background:#0f0f0f}
    .section{margin-top:36px;border-top:1px solid var(--line);padding-top:24px}
    ul{padding-left:18px}
    footer{margin:40px 0 10px;color:var(--muted);font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <div>
        <div class="kicker">${escapeHTML(opts.subtitle)}</div>
        <h1>${escapeHTML(opts.title)}</h1>
        <p>${escapeHTML(opts.body)}</p>
        <p><a class="cta" href="${opts.ctaHref}" target="_blank" rel="noopener">${escapeHTML(opts.ctaText)}</a></p>
      </div>
      <div>
        ${mediaEl}
      </div>
    </section>

    <section class="section">
      <h2 style="margin:0 0 8px;letter-spacing:-.02em">Preguntas frecuentes</h2>
      <ul>
        <li>¿Puedo editar este HTML? Sí, es tuyo.</li>
        <li>¿Cómo publico? Sube la carpeta al repo y conéctala a Netlify.</li>
        <li>¿SEO? Cambia el <code>&lt;title&gt;</code> y agrega tu descripción si quieres lucirte.</li>
      </ul>
    </section>

    <footer>Hecho con el generador estático client‑side.</footer>
  </div>
</body>
</html>`;
    }

    async function buildZip(){
      // Recolectar datos
      const data = {
        title: $('#title').value.trim() || 'Mi Landing',
        subtitle: $('#subtitle').value.trim() || '',
        body: $('#body').value.trim() || '',
        ctaText: $('#ctaText').value.trim() || 'Abrir',
        ctaHref: $('#ctaHref').value.trim() || '#',
        brand: ($('#brand').value.trim() || '#00c389'),
        mediaType: $('#mediaType').value,
        googleFont: $('#googleFont').value.trim(),
        cssFont: $('#googleFont').value ? `'${$('#googleFont').value.split(':')[0].replace(/\+/g,' ')}', Poppins, sans-serif` : 'Poppins, sans-serif'
      };

      // Validaciones mínimas
      if(!state.mediaFile){ alert('Sube una imagen o video.'); throw new Error('no media'); }

      const zip = new JSZip();
      const assets = zip.folder('assets');

      // Guardar media
      const mediaBuf = await state.mediaFile.arrayBuffer();
      const mediaName = state.mediaFile.name.replace(/[^\w\.\-]/g,'_');
      assets.file(mediaName, mediaBuf);
      data.mediaName = mediaName;

      // Guardar favicon si hay
      if(state.faviconFile){
        const favBuf = await state.faviconFile.arrayBuffer();
        const favName = state.faviconFile.name.replace(/[^\w\.\-]/g,'_');
        assets.file(favName, favBuf);
        data.faviconName = favName;
      } else {
        data.faviconName = '';
      }

      // Crear index.html
      const html = landingTemplate(data);
      zip.file('index.html', html);

      // Descargar
      const out = await zip.generateAsync({type:'blob'});
      saveAs(out, (data.title || 'landing') + '.zip');
    }

    async function preview(){
      // Genera una vista temporal embebiendo media como data URL para el iframe
      const data = {
        title: $('#title').value.trim() || 'Mi Landing',
        subtitle: $('#subtitle').value.trim() || '',
        body: $('#body').value.trim() || '',
        ctaText: $('#ctaText').value.trim() || 'Abrir',
        ctaHref: $('#ctaHref').value.trim() || '#',
        brand: ($('#brand').value.trim() || '#00c389'),
        mediaType: $('#mediaType').value,
        googleFont: $('#googleFont').value.trim(),
        cssFont: $('#googleFont').value ? `'${$('#googleFont').value.split(':')[0].replace(/\+/g,' ')}', Poppins, sans-serif` : 'Poppins, sans-serif'
      };

      let mediaHTML = '<div style="width:100%;height:320px;border:1px dashed #333;border-radius:12px;display:grid;place-items:center;color:#777">Sin media</div>';
      if(state.mediaFile){
        const url = URL.createObjectURL(state.mediaFile);
        mediaHTML = data.mediaType==='video' ? `<video class="hero-media" src="${url}" autoplay muted playsinline loop></video>` : `<img class="hero-media" src="${url}" alt="media" />`;
      }

      const fontTag = data.googleFont ? `<link href="https://fonts.googleapis.com/css2?family=${data.googleFont.replace(/ /g,'+')}\&display=swap" rel="stylesheet">` : '';
      const html = `<!DOCTYPE html><html><head><meta charset="utf-8">${fontTag}<style>
        :root{ --brand:${data.brand}; --bg:#0b0b0b; --fg:#eaeaea; --muted:#a1a1a1; --line:#1f1f1f; }
        *{box-sizing:border-box}body{margin:0;font-family:${data.cssFont};background:var(--bg);color:var(--fg)}
        .wrap{max-width:1100px;margin:0 auto;padding:24px}
        .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;min-height:75vh}
        @media(max-width:960px){.hero{grid-template-columns:1fr;min-height:unset}}
        .kicker{color:var(--muted);font-size:12px;letter-spacing:.12em;text-transform:uppercase}
        h1{margin:.2rem 0 0;letter-spacing:-.02em;font-size:clamp(28px,4.4vw,52px)}
        p{line-height:1.6;color:#cfcfcf}
        .cta{display:inline-flex;align-items:center;gap:10px;background:var(--brand);color:#001b12;border:none;padding:12px 16px;border-radius:12px;font-weight:700;text-decoration:none}
        .cta:hover{filter:brightness(.95)}
        .hero-media{width:100%;height:100%;object-fit:cover;border-radius:16px;border:1px solid var(--line);background:#0f0f0f}
      </style></head><body>
      <div class="wrap"><section class="hero"><div>
        <div class="kicker">${escapeHTML(data.subtitle)}</div>
        <h1>${escapeHTML(data.title)}</h1>
        <p>${escapeHTML(data.body)}</p>
        <p><a class="cta" href="${data.ctaHref}" target="_blank" rel="noopener">${escapeHTML(data.ctaText)}</a></p>
      </div><div>${mediaHTML}</div></section></div>
      </body></html>`;
      $('#preview').srcdoc = html;
    }

    $('#btnPreview').addEventListener('click', preview);
    $('#btnDownload').addEventListener('click', buildZip);

    // Auto preview inicial sin media
    preview();
  </script>
</body>
</html>
